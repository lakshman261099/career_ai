{% extends "base.html" %}
{% block title %}Pricing â€” CareerAI{% endblock %}

{% block content %}
<section class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 pt-10 pb-16 text-white">
  <!-- Header -->
  <header class="mb-6 space-y-2">
    <h1 class="text-3xl font-extrabold tracking-tight">Pricing</h1>
    <p class="text-sm text-white/75">
      Status:
      <span class="font-semibold">{{ subscription_status|capitalize }}</span>
      Â· ğŸª™ Silver:
      <span class="font-semibold">{{ user_free }}</span>
      Â· â­ Gold:
      <span class="font-semibold">{{ user_pro }}</span>
    </p>
    <p class="text-[11px] text-white/60 max-w-2xl">
      Silver <span class="font-semibold">ğŸª™</span> are free credits (given at account creation + daily refills).
      Gold <span class="font-semibold">â­</span> are Pro credits from your subscription and power Pro-only features.
    </p>
  </header>

  <!-- Plans -->
  <div class="grid md:grid-cols-2 gap-6 mt-4">
    <!-- Free -->
    <article class="glass-panel rounded-2xl p-6 border border-white/10 shadow-xl flex flex-col justify-between">
      <div class="space-y-3">
        <div>
          <h2 class="text-xl font-bold flex items-center gap-2">
            Free
            <span class="text-[11px] px-2 py-0.5 rounded-full bg-white/5 border border-white/25">
              ğŸª™ Included
            </span>
          </h2>
          <p class="text-xs text-white/70 mt-1">
            Try the full CareerAI flow with daily Silver credits, no card required.
          </p>
        </div>

        <ul class="mt-2 space-y-1.5 text-white/80 text-sm">
          <li>â€¢ Portfolio Builder (1 idea / run, daily limits)</li>
          <li>â€¢ Internship Analyzer (1 analysis / day)</li>
          <li>â€¢ Referral Trainer (core templates)</li>
          <li>â€¢ Job Pack (basic report, limited runs)</li>
          <li>â€¢ Skill Mapper (3 roles per run, daily limits)</li>
        </ul>

        <p class="text-[11px] text-white/55 mt-2">
          Perfect to explore: fill your Profile Portal, run Skill Mapper, and try a few Job Packs &amp; internships.
        </p>
      </div>

      <!-- Dev helper -->
      <a href="{{ url_for('billing.mock_topup_free') }}"
         class="btn-ghost mt-5 inline-flex text-xs">
        Add 5 Free Coins (dev)
      </a>
    </article>

    <!-- Pro -->
    <article class="glass-panel rounded-2xl p-6 border border-amber-400/35 shadow-xl flex flex-col justify-between relative overflow-hidden">
      <div class="pointer-events-none absolute inset-0 opacity-60"
           style="background: radial-gradient(circle at top right, rgba(251,191,36,.24), transparent 55%);"></div>

      <div class="relative space-y-3">
        <div>
          <h2 class="text-xl font-bold flex items-center gap-2">
            Pro
            <span class="text-[11px] px-2 py-0.5 rounded-full bg-amber-500/20 border border-amber-300/70 text-amber-100">
              â­ Recommended
            </span>
          </h2>
          <p class="text-xs text-white/70 mt-1">
            Unlock Gold credits, resume upload, deep Job Packs and portfolio publishing.
          </p>
        </div>

        <ul class="mt-2 space-y-1.5 text-white/80 text-sm">
          <li>â€¢ Monthly â­ Gold credits for Pro runs</li>
          <li>â€¢ Resume Profile upload &amp; scan (Pro-only)</li>
          <li>â€¢ 3+ Portfolio writeups &amp; public publishing</li>
          <li>â€¢ Deep Job Packs (full ATS breakdown, PDF export)</li>
          <li>â€¢ Higher limits + priority credit allocation</li>
        </ul>

        <p class="text-[11px] text-white/55 mt-2">
          Stripe handles all billing externally. You can cancel or change your plan from your Stripe customer portal.
        </p>
      </div>

      <div class="relative mt-4 space-y-2">
        {% if subscription_status != 'pro' %}
          <!-- Stripe Checkout (Subscription) -->
          <form action="{{ url_for('billing.checkout_pro') }}" method="POST" class="mt-1">
            <button type="submit" class="btn-primary inline-flex items-center gap-1">
              <span>Upgrade to Pro</span>
            </button>
          </form>
          <p class="text-[11px] text-white/60">
            No card details are stored on CareerAI servers. Youâ€™ll be redirected to Stripeâ€™s secure checkout.
          </p>
        {% else %}
          <div class="mt-2 text-emerald-300 text-sm flex items-center gap-1.5">
            <span>âœ…</span>
            <span>Youâ€™re on Pro ğŸ‰</span>
          </div>
          <p class="text-[11px] text-white/60">
            Your monthly â­ Gold credits will refill automatically according to your plan.
          </p>
        {% endif %}

        <!-- Dev helper -->
        <a href="{{ url_for('billing.mock_topup_pro') }}"
           class="btn-ghost mt-3 inline-flex text-xs">
          Add 10 Pro Coins (dev)
        </a>
      </div>
    </article>
  </div>

  <!-- Notes -->
  <div class="text-white/60 text-xs mt-6 space-y-1.5">
    <p>â€¢ We use <span class="font-semibold">Stripe</span> for billing. Card details are never handled or stored by CareerAI.</p>
    <p>â€¢ Silver ğŸª™ and Gold â­ are always deducted <span class="font-semibold">before</span> a tool runs.</p>
    <p>â€¢ If an analysis fails internally after retries, your credits are <span class="font-semibold">automatically refunded</span> and you can try again.</p>
  </div>
</section>
{% endblock %}
