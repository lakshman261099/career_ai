{% extends "base.html" %}
{% block title %}Dashboard ‚Äî {{ tenant_name or 'CareerAI' }}{% endblock %}

{% block content %}
<section class="relative overflow-hidden">
  <!-- Animated background layer behind the dashboard (still under base.html gradient) -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="w-full h-full opacity-60 animate-caGradient
                bg-[radial-gradient(circle_at_top_left,#f97316_0,transparent_55%),radial-gradient(circle_at_bottom_right,#6366f1_0,transparent_55%)]">
    </div>
  </div>

  {% set plan = (subscription_status or 'free')|lower %}

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-12 space-y-8 sm:space-y-10">
    <!-- Hero / Welcome -->
    <header class="space-y-4">
      <div class="flex flex-wrap items-start justify-between gap-4">
        <div class="space-y-2">
          <div class="flex items-center gap-2 text-[10px] uppercase tracking-[0.16em] text-white/60">
            <span class="px-2 py-0.5 rounded-full bg-white/5 border border-white/10 inline-flex items-center gap-1">
              <span class="inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
              <span>Student Dashboard</span>
            </span>
            {% if tenant_name %}
            <span class="hidden sm:inline text-white/40">¬∑</span>
            <span class="hidden sm:inline px-2 py-0.5 rounded-full bg-white/5 border border-white/10">
              {{ tenant_name }}
            </span>
            {% endif %}
          </div>
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-tight">
            Welcome{% if current_user.is_authenticated %}, {{ current_user.email }}{% endif %}
          </h1>
          <p class="text-sm sm:text-base text-slate-200 max-w-2xl">
            Use CareerAI as your AI career control center ‚Äî map your skills, design your Dream Plan, execute with Coach,
            decode real jobs, and reach warm referrals. Everything works best once your Profile Portal is complete.
          </p>
        </div>

        <div class="flex flex-col items-end gap-2 text-xs">
          <a href="{{ feature_paths.profile }}"
             class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/15 text-slate-100 hover:bg-white/10 hover:border-white/40 transition">
            <span class="inline-flex items-center gap-1 text-[11px] px-1.5 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/60 text-emerald-200">
              <i data-lucide="id-card" class="w-3.5 h-3.5"></i>
              Profile Portal
            </span>
            <span class="hidden sm:inline text-slate-200/90">
              Fill once ¬∑ reused by every tool
            </span>
            <span class="sm:hidden text-slate-200/90 text-[11px]">
              Complete your profile
            </span>
          </a>
          <p class="text-[10px] text-white/40 text-right max-w-xs">
            Step 1 for every student: complete your Profile Portal. Then run Dream Planner &amp; Coach, and layer other tools on top.
          </p>
        </div>
      </div>

      <!-- How to use strip -->
      <div class="glass-card rounded-2xl px-4 py-3 text-[11px] text-white/70 mt-1.5 border border-white/10 shadow-lg/40">
        <p class="font-semibold text-white/80 mb-1">Your CareerAI path:</p>
        <div class="flex flex-wrap items-center gap-x-3 gap-y-1">
          <span class="inline-flex items-center gap-1">
            <span class="font-semibold">1)</span> <strong>Profile Portal</strong> ‚Äî basics, skills &amp; projects
          </span>
          <span class="inline-flex items-center gap-1">
            ‚Üí <strong>Dream Planner</strong> &amp; <strong>Coach</strong> ‚Äî design &amp; execute your 3-phase plan
          </span>
          <span class="inline-flex items-center gap-1">
            ‚Üí <strong>Skill Mapper</strong> ‚Äî choose target roles
          </span>
          <span class="inline-flex items-center gap-1">
            ‚Üí <strong>Portfolio</strong> ‚Äî build role-based projects
          </span>
          <span class="inline-flex items-center gap-1">
            ‚Üí <strong>Job Packs &amp; Internship Analyzer</strong> ‚Äî test real JDs &amp; internships
          </span>
          <span class="inline-flex items-center gap-1">
            ‚Üí <strong>Referral Trainer</strong> ‚Äî reach people at those companies
          </span>
        </div>
      </div>

      <!-- Dream Planner + Coach lane -->
      <div class="mt-3 glass-card rounded-2xl px-4 py-4 border border-white/15 shadow-lg/40 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <div class="space-y-1.5 max-w-xl">
          <p class="uppercase tracking-[0.16em] text-[10px] text-white/60 flex items-center gap-2">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-white/5 border border-white/15">
              <i data-lucide="sparkles" class="w-3.5 h-3.5"></i>
              <span>Dream &amp; Coach lane</span>
            </span>
            {% if plan == 'pro' %}
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/60 text-emerald-100">
                <i data-lucide="flame" class="w-3.5 h-3.5"></i>
                <span>Pro unlocked</span>
              </span>
            {% else %}
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-900/80 border border-slate-500/70 text-slate-100">
                <i data-lucide="lock" class="w-3.5 h-3.5"></i>
                <span>Coach needs Pro</span>
              </span>
            {% endif %}
          </p>
          <h2 class="text-sm sm:text-base font-semibold text-white">
            Turn your Dream Plan into weekly execution.
          </h2>
          <p class="text-[11px] sm:text-xs text-white/70">
            Use <strong>Dream Planner</strong> once to get your 3-phase roadmap. Then use <strong>Coach</strong> 3‚Äì5 days a week
            to get realistic weekly focus packs, checklists, and a built-in focus timer.
          </p>
          <ul class="mt-1.5 text-[11px] text-white/70 space-y-0.5">
            <li>‚Ä¢ Phase-based plan for your target salary or startup goal</li>
            <li>‚Ä¢ Weekly Coach sessions with 3‚Äì8 small, high-signal tasks</li>
            <li>‚Ä¢ Progress streaks + reflection notes to track momentum</li>
          </ul>
        </div>
        <div class="flex flex-col items-end gap-2 text-xs">
          <div class="flex flex-wrap gap-2 justify-end">
            <a href="{{ feature_paths.dream }}"
               class="btn-primary text-xs inline-flex items-center gap-1">
              <i data-lucide="moon-star" class="w-3.5 h-3.5"></i>
              <span>Open Dream Planner</span>
            </a>
            <a href="{{ feature_paths.coach }}"
               class="btn-ghost text-[11px] inline-flex items-center gap-1">
              <i data-lucide="calendar-check" class="w-3.5 h-3.5"></i>
              <span>Open Coach</span>
            </a>
          </div>
          <p class="text-[10px] text-white/45 text-right max-w-xs">
            Hint: run Dream Planner when your goal changes. Use Coach as your execution home every active week.
          </p>
        </div>
      </div>

      <!-- Top cards: Credits / Plan + Alerts -->
      <div class="mt-3 grid gap-3 lg:grid-cols-[minmax(0,1.6fr)_minmax(0,1.4fr)]">
        <!-- Credits & plan -->
        <div class="glass-card rounded-2xl px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-[12px] border border-white/10 shadow-lg/40">
          <div class="space-y-1">
            <p class="uppercase tracking-[0.16em] text-[10px] text-white/60 flex items-center gap-2">
              <span>Credits &amp; plan</span>
              {% if plan == 'pro' %}
              <span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/60 text-[10px] text-emerald-100">
                <i data-lucide="sparkles" class="w-3 h-3"></i>
                Pro active
              </span>
              {% else %}
              <span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-slate-900/80 border border-slate-500/70 text-[10px] text-slate-100">
                <i data-lucide="badge-info" class="w-3 h-3"></i>
                Free plan
              </span>
              {% endif %}
            </p>
            <div class="flex flex-wrap items-center gap-2">
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[10px] uppercase tracking-widest
                            {% if plan == 'pro' %}
                              bg-emerald-500/15 border-emerald-300/70 text-emerald-100
                            {% else %}
                              bg-slate-900/80 border-slate-400/60 text-slate-100
                            {% endif %}">
                {{ 'Pro' if plan == 'pro' else 'Free' }}
              </span>
              <span class="text-white/60 text-[11px]">
                Use Silver ü™ô for free tools and Gold ‚≠ê for Pro-only features.
              </span>
            </div>
          </div>
          <div class="flex flex-wrap items-center gap-3">
            <div class="flex items-center gap-2 px-2.5 py-1.5 rounded-full bg-slate-950/80 border border-slate-600/70 shadow-md/40">
              <span class="text-base">ü™ô</span>
              <div class="flex flex-col leading-tight">
                <span class="text-[11px] text-slate-300/80 uppercase tracking-[0.16em]">Silver</span>
                <span class="text-sm font-semibold">{{ user_free or 0 }}</span>
              </div>
            </div>
            <div class="flex items-center gap-2 px-2.5 py-1.5 rounded-full bg-slate-950/80 border border-slate-600/70 shadow-md/40">
              <span class="text-base">‚≠ê</span>
              <div class="flex flex-col leading-tight">
                <span class="text-[11px] text-slate-300/80 uppercase tracking-[0.16em]">Gold</span>
                <span class="text-sm font-semibold">{{ user_pro or 0 }}</span>
              </div>
            </div>
            <a href="{{ feature_paths.billing }}"
               class="btn-ghost text-[11px] whitespace-nowrap inline-flex items-center gap-1">
              <i data-lucide="coins" class="w-3.5 h-3.5"></i>
              Open Coins Shop
            </a>
          </div>
        </div>

        <!-- Right side: verification / upgrade / university -->
        <div class="space-y-3">
          {% if current_user.is_authenticated and not current_user.verified %}
          <!-- Email verification nudge -->
          <div class="glass-card rounded-2xl px-4 py-3 border border-amber-400/60 text-xs sm:text-sm text-amber-100 shadow-lg/40">
            <div class="flex flex-wrap items-center justify-between gap-2">
              <div class="space-y-1">
                <p class="font-semibold flex items-center gap-1.5">
                  <i data-lucide="mail-check" class="w-4 h-4"></i>
                  Finish email verification to unlock AI tools.
                </p>
                <p class="text-amber-100/80 text-[11px] sm:text-xs max-w-md">
                  You can explore every page now. When you click ‚ÄúAnalyze‚Äù or ‚ÄúGenerate‚Äù, we‚Äôll ask for a one-time email code.
                  Verifying once keeps your tools open on this device.
                </p>
              </div>
              <a href="{{ url_for('auth.otp_request') }}"
                 class="btn-primary text-xs whitespace-nowrap inline-flex items-center gap-1">
                <i data-lucide="sparkles" class="w-3.5 h-3.5"></i>
                Get login code
              </a>
            </div>
          </div>
          {% endif %}

          {% if plan != 'pro' %}
          <!-- Upgrade to Pro banner -->
          <div class="glass-card rounded-2xl px-4 py-3 border border-violet-400/50 text-xs sm:text-sm text-violet-50 shadow-lg/40 bg-gradient-to-r from-violet-600/25 via-slate-900/90 to-amber-500/15">
            <div class="flex flex-wrap items-center justify-between gap-2">
              <div class="space-y-1">
                <p class="font-semibold flex items-center gap-1.5">
                  <i data-lucide="rocket" class="w-4 h-4"></i>
                  Upgrade to Pro for unlimited depth.
                </p>
                <p class="text-violet-100/80 text-[11px] sm:text-xs max-w-md">
                  Pro unlocks Dream Planner, Weekly Coach, Portfolio publishing, Skill Mapper Pro, full Job Packs,
                  and deep Internship Analyzer runs ‚Äî all powered by your Profile Portal and resume.
                </p>
              </div>
              <a href="{{ feature_paths.billing }}"
                 class="inline-flex items-center gap-1 rounded-full bg-white text-slate-900 text-xs font-semibold px-3 py-1.5 hover:bg-slate-100 transition">
                View Pro plans
                <i data-lucide="chevron-right" class="w-3.5 h-3.5"></i>
              </a>
            </div>
          </div>
          {% endif %}

          {% if tenant_name %}
          <!-- University branding card -->
          <div class="glass-card rounded-2xl px-4 py-3 border border-white/8 text-[11px] text-white/80 shadow-lg/40 flex items-center justify-between gap-3">
            <div class="space-y-0.5">
              <p class="uppercase tracking-[0.18em] text-[10px] text-white/50">University space</p>
              <p class="text-sm font-semibold">{{ tenant_name }}</p>
              <p class="text-[11px] text-white/55">
                Your credits, tools &amp; analytics are scoped to this university workspace.
              </p>
            </div>
            <div class="hidden sm:flex flex-col items-end text-right gap-1">
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-white/5 border border-white/10 text-[11px]">
                <i data-lucide="shield-check" class="w-3.5 h-3.5"></i>
                Tenant secured
              </span>
              <span class="text-[10px] text-white/40">Powered by CareerAI</span>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- Quick actions + usage snapshot -->
    <div class="grid gap-4 lg:grid-cols-[minmax(0,1.6fr)_minmax(0,1.1fr)]">
      <!-- Quick actions -->
      <section class="glass-card rounded-2xl px-4 py-3.5 border border-white/10 shadow-lg/40 space-y-3">
        <div class="flex items-center justify-between gap-2">
          <div>
            <h2 class="text-sm font-semibold text-white flex items-center gap-1.5">
              <i data-lucide="wand-2" class="w-4 h-4"></i>
              Quick actions
            </h2>
            <p class="text-[11px] text-white/55">
              Jump straight into a tool ‚Äî you can always come back to the dashboard.
            </p>
          </div>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2.5">
          <!-- Dream Planner quick action -->
          <a href="{{ feature_paths.dream }}"
             class="group flex items-center gap-2 rounded-xl border border-indigo-500/40 bg-indigo-500/10 px-2.5 py-2 text-xs hover:bg-indigo-500/20 hover:border-indigo-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-indigo-500/30">
              <i data-lucide="moon-star" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Dream Planner</span>
              <span class="text-[10px] text-indigo-100/80">Design 3-phase plan</span>
            </span>
          </a>

          <!-- Coach quick action -->
          <a href="{{ feature_paths.coach }}"
             class="group flex items-center gap-2 rounded-xl border border-rose-500/40 bg-rose-500/10 px-2.5 py-2 text-xs hover:bg-rose-500/20 hover:border-rose-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-rose-500/30">
              <i data-lucide="calendar-check" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Coach</span>
              <span class="text-[10px] text-rose-100/80">Weekly focus packs</span>
            </span>
          </a>

          <a href="{{ feature_paths.skillmapper }}"
             class="group flex items-center gap-2 rounded-xl border border-violet-500/40 bg-violet-500/10 px-2.5 py-2 text-xs hover:bg-violet-500/20 hover:border-violet-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-violet-500/30">
              <i data-lucide="radar" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Skill Mapper</span>
              <span class="text-[10px] text-violet-100/80">Find your top 3 roles</span>
            </span>
          </a>

          <a href="{{ feature_paths.jobpack }}"
             class="group flex items-center gap-2 rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-2.5 py-2 text-xs hover:bg-emerald-500/20 hover:border-emerald-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-emerald-500/30">
              <i data-lucide="file-search" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Job Pack</span>
              <span class="text-[10px] text-emerald-100/85">Paste a JD &amp; analyze</span>
            </span>
          </a>

          <a href="{{ feature_paths.portfolio }}"
             class="group flex items-center gap-2 rounded-xl border border-fuchsia-500/40 bg-fuchsia-500/10 px-2.5 py-2 text-xs hover:bg-fuchsia-500/20 hover:border-fuchsia-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-fuchsia-500/30">
              <i data-lucide="layout-dashboard" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Portfolio Builder</span>
              <span class="text-[10px] text-fuchsia-100/85">Turn skills into projects</span>
            </span>
          </a>

          <a href="{{ feature_paths.internships }}"
             class="group flex items-center gap-2 rounded-xl border border-sky-500/40 bg-sky-500/10 px-2.5 py-2 text-xs hover:bg-sky-500/20 hover:border-sky-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-sky-500/30">
              <i data-lucide="graduation-cap" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Internship Analyzer</span>
              <span class="text-[10px] text-sky-100/85">Check an internship</span>
            </span>
          </a>

          <a href="{{ feature_paths.referral }}"
             class="group flex items-center gap-2 rounded-xl border border-amber-500/50 bg-amber-500/10 px-2.5 py-2 text-xs hover:bg-amber-500/20 hover:border-amber-300/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-amber-500/30">
              <i data-lucide="messages-square" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Referral Trainer</span>
              <span class="text-[10px] text-amber-100/85">Draft outreach in minutes</span>
            </span>
          </a>

          <a href="{{ feature_paths.profile }}"
             class="group flex items-center gap-2 rounded-xl border border-slate-500/60 bg-slate-900/70 px-2.5 py-2 text-xs hover:bg-slate-800/90 hover:border-slate-200/80 transition">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-lg bg-slate-700/80">
              <i data-lucide="user-round" class="w-3.5 h-3.5"></i>
            </span>
            <span class="flex flex-col">
              <span class="font-semibold text-slate-50">Edit Profile</span>
              <span class="text-[10px] text-slate-300/80">Update skills &amp; resume</span>
            </span>
          </a>
        </div>
      </section>

      <!-- Usage snapshot / simple chart -->
      <section class="glass-card rounded-2xl px-4 py-3.5 border border-white/10 shadow-lg/40 space-y-3">
        <div class="flex items-center justify-between gap-2">
          <div>
            <h2 class="text-sm font-semibold text-white flex items-center gap-1.5">
              <i data-lucide="activity" class="w-4 h-4"></i>
              Credit snapshot
            </h2>
            <p class="text-[11px] text-white/55">
              Simple view of your current Silver vs Gold balance.
            </p>
          </div>
        </div>
        <div class="mt-1.5">
          <canvas id="creditsChart"
                  class="w-full h-32"
                  data-silver="{{ user_free or 0 }}"
                  data-gold="{{ user_pro or 0 }}"></canvas>
        </div>
        <p class="text-[10px] text-white/40">
          Visual only ‚Äî balances update whenever you use or receive credits.
        </p>
      </section>
    </div>

    <!-- Features zig-zag -->
    <div class="space-y-8 sm:space-y-10 pt-4">
      <!-- 0. Dream Planner + Coach (left) -->
      <div class="ca-feature-row ca-feature-left">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-indigo-500 to-fuchsia-400">
            <span class="text-xl">‚ú®</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Dream Planner &amp; Coach</h2>
            <p class="text-slate-200 text-sm">
              Design a 3-phase Dream Plan for your target job or startup, then turn it into weekly focus packs with Coach ‚Äî
              small checklists, a focus timer, and honest progress tracking.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/40">
              üéØ Phase-based roadmap
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-violet-500/15 border border-violet-400/40">
              ‚è±Ô∏è Weekly focus packs
            </span>
          </div>
          <div class="pt-2 flex flex-wrap gap-2">
            <a href="{{ feature_paths.dream }}" class="ca-feature-cta">
              Open Dream Planner
            </a>
            <a href="{{ feature_paths.coach }}"
               class="inline-flex items-center justify-center px-3 py-1.5 rounded-full border border-white/30 text-[11px] text-white/90 hover:bg-white/5 transition">
              <i data-lucide="calendar-check" class="w-3.5 h-3.5 mr-1"></i>
              Open Coach
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-left">
            <h3 class="text-sm font-semibold mb-1.5 text-white">How this helps</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ 3-phase roadmap tuned to your target LPA or startup goal</li>
              <li>‚Ä¢ Weekly-sized Coach tasks (15‚Äì60 minutes each)</li>
              <li>‚Ä¢ Mix of skills, projects, and career capital (resume, LinkedIn, outreach)</li>
              <li>‚Ä¢ Streaks and reflections so you see momentum week by week</li>
            </ul>
          </div>
        </article>
      </div>

      <!-- 1. Skill Mapper (left) -->
      <div class="ca-feature-row ca-feature-left">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-violet-500 to-indigo-400">
            <span class="text-xl">‚òç</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Skill Mapper</h2>
            <p class="text-slate-200 text-sm">
              Uses your Profile Portal and latest resume to suggest 3 best-fit roles with India demand and sample salaries.
              Start here after filling your profile or Dream Plan.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-violet-500/15 border border-violet-400/40">
              <span class="text-[10px]">‚òÖ</span> India demand
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-sky-500/15 border border-sky-400/40">
              ‚Çπ salaries (0‚Äì3 YOE)
            </span>
          </div>
          <div class="pt-2">
            <a href="{{ feature_paths.skillmapper }}" class="ca-feature-cta">
              Open Skill Mapper
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-left">
            <h3 class="text-sm font-semibold mb-1.5 text-white">What you‚Äôll see</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ Top 3 roles ranked by fit from your skills snapshot</li>
              <li>‚Ä¢ Skills you already have vs gaps for each role</li>
              <li>‚Ä¢ India hiring demand &amp; salary hints per role</li>
              <li>‚Ä¢ Micro-project ideas to close the biggest gaps</li>
            </ul>
          </div>
        </article>
      </div>

      <!-- 2. Job Packs (right) -->
      <div class="ca-feature-row ca-feature-right">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-emerald-500 to-teal-400">
            <span class="text-xl">üìÑ</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Job Pack</h2>
            <p class="text-slate-200 text-sm">
              Paste a JD. Get ATS score, missing keywords, interview Q&amp;A, and a full prep plan.
              Your Profile Portal resume and skills are auto-read for better matching.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/40">
              ‚úÖ Resume checklist
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-indigo-500/15 border border-indigo-400/40">
              üéØ Interview drills
            </span>
          </div>
          <div class="pt-2">
            <a href="{{ feature_paths.jobpack }}" class="ca-feature-cta">
              Analyze a job
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-right">
            <h3 class="text-sm font-semibold mb-1.5 text-white">What you‚Äôll see</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ ATS score with exact phrases to add to your resume</li>
              <li>‚Ä¢ Matched vs missing skills and tools</li>
              <li>‚Ä¢ Role-specific interview questions &amp; model answers</li>
              <li>‚Ä¢ 7-day prep plan tailored to that JD</li>
            </ul>
          </div>
        </article>
      </div>

      <!-- 3. Portfolio Builder (left) -->
      <div class="ca-feature-row ca-feature-left">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-fuchsia-500 to-rose-400">
            <span class="text-xl">üöÄ</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Portfolio Builder</h2>
            <p class="text-slate-200 text-sm">
              Convert your skills into standout project ideas with impact bullets and tech stack suggestions.
              Pulls directly from your Profile Portal skills &amp; projects.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-fuchsia-500/15 border border-fuchsia-400/40">
              üìå Recruiter-ready bullets
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-100/10 border border-slate-400/40">
              üåê Public portfolio link (Pro)
            </span>
          </div>
          <div class="pt-2">
            <a href="{{ feature_paths.portfolio }}" class="ca-feature-cta">
              Design a project
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-left">
            <h3 class="text-sm font-semibold mb-1.5 text-white">What you‚Äôll see</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ 1‚Äì3 project ideas matched to your target role</li>
              <li>‚Ä¢ Recommended tech stack with beginner-friendly options</li>
              <li>‚Ä¢ Impact bullets you can paste into your resume</li>
              <li>‚Ä¢ Pro: publish a clean portfolio page from your profile</li>
            </ul>
          </div>
        </article>
      </div>

      <!-- 4. Internship Analyzer (right) -->
      <div class="ca-feature-row ca-feature-right">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-sky-500 to-cyan-400">
            <span class="text-xl">üéì</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Internship Analyzer</h2>
            <p class="text-slate-200 text-sm">
              Paste any internship description. See what you‚Äôll learn, portfolio impact, and next roles it opens.
              Tailors advice based on your Profile Portal goals.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-sky-500/15 border border-sky-400/40">
              üìà Skill growth
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/15 border border-emerald-400/40">
              üîÅ Pathway after internship
            </span>
          </div>
          <div class="pt-2">
            <a href="{{ feature_paths.internships }}" class="ca-feature-cta">
              Evaluate an internship
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-right">
            <h3 class="text-sm font-semibold mb-1.5 text-white">What you‚Äôll see</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ Concrete skills you‚Äôll build (tools + concepts)</li>
              <li>‚Ä¢ How it boosts your resume and portfolio</li>
              <li>‚Ä¢ Likely next roles after 6‚Äì18 months</li>
              <li>‚Ä¢ Whether it matches your long-term direction</li>
            </ul>
          </div>
        </article>
      </div>

      <!-- 5. Referral Trainer (left) -->
      <div class="ca-feature-row ca-feature-left">
        <article class="ca-feature-card">
          <div class="ca-feature-icon bg-gradient-to-tr from-amber-500 to-orange-400">
            <span class="text-xl">üì®</span>
          </div>
          <div class="space-y-1.5">
            <h2 class="text-lg font-semibold">Referral Trainer</h2>
            <p class="text-slate-200 text-sm">
              Draft warm, respectful outreach to alumni and employees ‚Äî without sounding robotic or salesy.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-slate-200/90">
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500/15 border border-amber-400/40">
              üí¨ Warm, cold &amp; follow-ups
            </span>
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-100/10 border border-slate-400/40">
              ü™ô Free feature
            </span>
          </div>
          <div class="pt-2">
            <a href="{{ feature_paths.referral }}" class="ca-feature-cta">
              Draft a message
            </a>
          </div>

          <div class="ca-feature-detail ca-feature-detail-left">
            <h3 class="text-sm font-semibold mb-1.5 text-white">What you‚Äôll see</h3>
            <ul class="space-y-1.5 text-xs text-slate-100/90">
              <li>‚Ä¢ 3 outreach drafts: warm, cold, and follow-up</li>
              <li>‚Ä¢ Student-friendly tone (no cringe, no hype)</li>
              <li>‚Ä¢ Clear subject line + LinkedIn opener</li>
              <li>‚Ä¢ Easy spots to personalize in 10‚Äì15 seconds</li>
            </ul>
          </div>
        </article>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<!-- Lucide + Chart.js (dashboard only) -->
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  /* Subtle animated gradient in background */
  @keyframes caGradient {
    0%   { transform: translate3d(0,0,0) scale(1); }
    50%  { transform: translate3d(-3%, -4%, 0) scale(1.03); }
    100% { transform: translate3d(0,0,0) scale(1); }
  }
  .animate-caGradient {
    animation: caGradient 26s ease-in-out infinite;
  }

  /* Feature rows (zig-zag left/right) */
  .ca-feature-row {
    position: relative;
    display: flex;
    justify-content: flex-start;
  }
  .ca-feature-row.ca-feature-right {
    justify-content: flex-end;
  }

  /* Core feature card */
  .ca-feature-card {
    position: relative;
    width: 100%;
    max-width: 480px;
    padding: 1.5rem 1.6rem;
    border-radius: 1.4rem;
    background:
      radial-gradient(circle at top left, rgba(148,163,253,0.25), transparent 55%),
      radial-gradient(circle at bottom right, rgba(249,115,22,0.18), transparent 55%),
      rgba(15,23,42,0.95);
    border: 1px solid rgba(148,163,184,0.45);
    box-shadow: 0 22px 44px rgba(15,23,42,0.9);
    display: flex;
    flex-direction: column;
    gap: 0.85rem;
    overflow: hidden;
    cursor: pointer;
    transition:
      transform 220ms cubic-bezier(0.22,0.61,0.36,1),
      box-shadow 220ms cubic-bezier(0.22,0.61,0.36,1),
      border-color 200ms ease-out,
      background 220ms ease-out;
  }
  .ca-feature-card:hover {
    transform: translate3d(0,-4px,0) scale(1.01);
    box-shadow: 0 28px 60px rgba(59,130,246,0.6);
    border-color: rgba(129,140,248,0.9);
    background:
      radial-gradient(circle at top left, rgba(129,140,248,0.38), transparent 60%),
      radial-gradient(circle at bottom right, rgba(249,115,22,0.22), transparent 55%),
      rgba(15,23,42,0.96);
  }

  .ca-feature-icon {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 0.9rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 16px 35px rgba(15,23,42,0.75);
  }

  .ca-feature-cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.55rem 1rem;
    font-size: 0.8rem;
    border-radius: 999px;
    background: linear-gradient(90deg,#4f46e5,#6366f1,#f97316);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 16px 32px rgba(79,70,229,0.8);
    text-decoration: none;
    transition:
      transform 160ms ease-out,
      box-shadow 160ms ease-out,
      filter 160ms ease-out;
  }
  .ca-feature-cta:hover {
    transform: translateY(-1px);
    box-shadow: 0 22px 40px rgba(79,70,229,0.95);
    filter: brightness(1.05);
  }

  /* Detail panel that expands out on hover (desktop) */
  .ca-feature-detail {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 52%;
    padding: 1.2rem 1.3rem;
    border-radius: 1.3rem;
    background: rgba(15,23,42,0.96);
    border: 1px solid rgba(148,163,184,0.6);
    box-shadow: 0 18px 40px rgba(15,23,42,0.9);
    opacity: 0;
    pointer-events: none;
    transform: translate3d(0,8px,0);
    transition:
      opacity 220ms ease-out,
      transform 240ms cubic-bezier(0.22,0.61,0.36,1);
  }
  .ca-feature-detail-left { right: -54%; }
  .ca-feature-detail-right { left: -54%; }

  .ca-feature-card:hover .ca-feature-detail {
    opacity: 1;
    transform: translate3d(0,0,0);
    pointer-events: auto;
  }

  /* Mobile: stack, details appear under card instead of sliding */
  @media (max-width: 900px) {
    .ca-feature-row,
    .ca-feature-row.ca-feature-right {
      justify-content: center;
    }
    .ca-feature-card {
      max-width: 100%;
    }
    .ca-feature-detail,
    .ca-feature-detail-left,
    .ca-feature-detail-right {
      position: static;
      width: 100%;
      margin-top: 0.75rem;
      opacity: 1;
      transform: none;
      pointer-events: auto;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Initialize Lucide icons if available
    if (window.lucide) {
      window.lucide.createIcons();
    }

    // Simple credits bar chart
    var canvas = document.getElementById('creditsChart');
    if (canvas && window.Chart) {
      var silver = parseInt(canvas.dataset.silver || '0', 10);
      var gold = parseInt(canvas.dataset.gold || '0', 10);
      var ctx = canvas.getContext('2d');

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Silver ü™ô', 'Gold ‚≠ê'],
          datasets: [{
            data: [silver, gold],
            backgroundColor: ['rgba(148, 163, 253, 0.8)', 'rgba(251, 191, 36, 0.85)'],
            borderRadius: 8,
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.parsed.y + ' credits';
                }
              }
            }
          },
          scales: {
            x: {
              grid: { display: false },
              ticks: {
                color: '#e5e7eb',
                font: { size: 10 }
              }
            },
            y: {
              grid: { color: 'rgba(148,163,184,0.25)', drawBorder: false },
              ticks: {
                color: '#9ca3af',
                font: { size: 9 },
                precision: 0,
                stepSize: Math.max(1, Math.round(Math.max(silver, gold) / 4) || 1)
              },
              beginAtZero: true
            }
          }
        }
      });
    }
  });
</script>
{% endblock %}
