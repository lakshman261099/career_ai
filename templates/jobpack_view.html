{% extends "base.html" %}
{% block content %}
<a href="/dashboard" class="underline text-sm">← Back</a>
<h2 class="text-3xl font-bold mb-4">Job Pack Pro</h2>
<div class="grid md:grid-cols-2 gap-6">
  <div class="glass p-4 card">
    <h3 class="font-bold mb-2">Meta</h3>
    <p><strong>Role:</strong> {{ pack.meta.role }} | <strong>Mode:</strong> {{ pack.meta.analysis_mode }}</p>
    {% if report_id %}
      <p class="text-sm opacity-80 mt-1">Saved (#{{ report_id }})</p>
    {% endif %}
  </div>
  <div class="glass p-4 card">
    <h3 class="font-bold mb-2">Verdict</h3>
    <p class="text-lg">{{ pack.overall_verdict.status }}</p>
    <p class="opacity-90">{{ pack.overall_verdict.summary }}</p>
    <ul class="list-disc list-inside">
      {% for r in pack.overall_verdict.recommendations %}<li>{{ r }}</li>{% endfor %}
    </ul>
  </div>

  <div class="glass p-4 card md:col-span-2">
    <h3 class="font-bold mb-2">Scores</h3>
    <div class="grid md:grid-cols-5 gap-3">
      {% for k,v in pack.scores.items() %}
        <div class="p-3 glass card">
          <div class="font-semibold">{{ k.title() }}</div>
          <div class="w-full bg-white/20 rounded h-3 mt-2">
            <div class="bg-white h-3 rounded" style="width: {{ v.score }}%"></div>
          </div>
          <div class="text-xs mt-1 opacity-80">Score: {{ v.score }}</div>
          <ul class="text-xs mt-1 list-disc list-inside">
            {% for n in v.notes %}<li>{{ n }}</li>{% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="glass p-4 card">
    <h3 class="font-bold mb-2">Tailored Resume Bullets</h3>
    <ul class="list-disc list-inside space-y-1">{% for b in pack.tailored_resume_bullets %}<li>{{ b }}</li>{% endfor %}</ul>
    <p class="mt-3"><strong>Missing skills:</strong> {{ ", ".join(pack.missing_skills) }}</p>
  </div>
  <div class="glass p-4 card">
    <h3 class="font-bold mb-2">Cover Letter</h3>
    <p class="whitespace-pre-wrap">{{ pack.cover_letter }}</p>
    <h4 class="font-bold mt-4">Interview Questions</h4>
    <ul class="list-disc list-inside space-y-1">
      {% for q in pack.interview_questions %}
        <li><strong>{{ q.question }}</strong> — <span class="text-sm opacity-80">{{ q.sample_answer }}</span></li>
      {% endfor %}
    </ul>
    <h4 class="font-bold mt-4">Follow‑ups</h4>
    <ul class="list-disc list-inside">{% for f in pack.follow_up_actions %}<li>{{ f }}</li>{% endfor %}</ul>
  </div>
</div>

{% if report_id %}
  <div class="mt-6">
    <a class="px-4 py-2 glass card inline-block" href="/jobpack/export_pdf/{{ report_id }}">Export PDF</a>
  </div>
{% endif %}
{% endblock %}
