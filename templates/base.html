<!-- career_ai/templates/base.html -->
<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}CareerAI{% endblock %}</title>
  <!-- Tailwind CDN (ok for demo) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --glass:#6d28d9; }
    .glass {
      background: linear-gradient(135deg, rgba(109,40,217,.6), rgba(168,85,247,.4));
      backdrop-filter: blur(8px);
    }
    /* Skeletons */
    .skeleton { position: relative; overflow: hidden; background: #e5e7eb; }
    .skeleton::after{
      content:""; position:absolute; inset:0;
      transform: translateX(-100%);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.5), transparent);
      animation: shimmer 1.2s infinite;
    }
    @keyframes shimmer { 100% { transform: translateX(100%);} }
    /* Pro lock */
    .locked { position: relative; filter: blur(2px) grayscale(.2); pointer-events:none; }
    .lock-overlay {
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      background: rgba(2,6,23,.55); color:#fff; font-weight:600;
    }
    /* Theme */
    [data-theme=dark] body { background:#0b1020; color:#e5e7eb; }
    [data-theme=dark] .glass { background: linear-gradient(135deg, rgba(109,40,217,.3), rgba(15,23,42,.6)); }
  </style>
</head>
<body class="min-h-screen">
  <header class="p-4 flex justify-between items-center">
    <a href="/" class="font-bold text-xl">Career<span class="text-purple-500">AI</span></a>
    <div class="flex gap-3 items-center">
      <button id="themeToggle" class="px-3 py-1 rounded border">ðŸŒ“ Theme</button>
      <a href="/pricing" class="px-3 py-1 rounded bg-purple-600 text-white">Go Pro</a>
    </div>
  </header>

  <main class="max-w-5xl mx-auto p-4">
    {% block content %}{% endblock %}
  </main>

  <footer class="text-center text-sm text-slate-500 p-8">Â© {{ 2025 }} CareerAI â€¢ <a href="/privacy" class="underline">Privacy</a></footer>

  <script>
    // Theme toggle
    (function(){
      const k='careerai-theme'; const saved = localStorage.getItem(k) || 'light';
      document.documentElement.setAttribute('data-theme', saved);
      document.getElementById('themeToggle').onclick = () => {
        const cur = document.documentElement.getAttribute('data-theme');
        const next = cur === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem(k, next);
      }
    })();

    // Confetti hook (minimal)
    window.__confettiNow = function(){
      const canvas = document.createElement('canvas');
      canvas.style.position='fixed'; canvas.style.inset='0'; canvas.style.pointerEvents='none'; document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d'); canvas.width=innerWidth; canvas.height=innerHeight;
      const pieces = Array.from({length:120},()=>({x:Math.random()*canvas.width,y:-20,vy:2+Math.random()*4,wx:Math.random()*2,w:6+Math.random()*6,h:8+Math.random()*12}));
      let t=0;
      function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        pieces.forEach(p=>{ p.y+=p.vy; p.x+=Math.sin((t+p.y)/20)*1.5; ctx.fillStyle = `hsl(${(t+p.x)%360},80%,60%)`; ctx.fillRect(p.x,p.y,p.w,p.h);});
        t+=4; if (t<1200) requestAnimationFrame(draw); else canvas.remove();
      } draw();
    }

    // Simple helper to show Pro lock on elements with data-lock="pro" for non-Pro users
    {% if not is_pro() %}
    document.querySelectorAll('[data-lock="pro"]').forEach(el=>{
      el.classList.add('locked');
      const overlay = document.createElement('div');
      overlay.className='lock-overlay';
      overlay.innerHTML='<div class="text-center"><div class="text-lg mb-2">Pro Feature</div><a class="px-3 py-1 rounded bg-purple-600 text-white" href="/pricing">Unlock Pro</a></div>';
      el.appendChild(overlay);
    });
    {% endif %}
  </script>
</body>
</html>
