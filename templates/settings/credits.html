{% extends "base.html" %}
{% block title %}Credits â€” CareerAI{% endblock %}
{% block content %}
<section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 pt-10 pb-16 text-white">
  <div class="grid lg:grid-cols-[260px,1fr] gap-6">
    {% include "settings/_sidebar.html" %}

    <div class="space-y-6">
      <!-- Balances -->
      <div class="glass-panel rounded-2xl p-6 shadow-xl border border-white/10">
        <div class="flex items-center justify-between gap-3 mb-3">
          <div>
            <h1 class="text-xl font-bold">Your Credits</h1>
            <p class="text-white/70 text-sm mt-1">
              Silver <span class="font-semibold">ğŸª™</span> are free credits; Gold <span class="font-semibold">â­</span> are Pro credits from your subscription.
            </p>
          </div>
          <div class="flex flex-col items-end gap-1 text-xs text-white/70">
            <span class="px-3 py-1 rounded-full bg-white/5 border border-white/20">
              Status: <span class="font-semibold uppercase">{{ subscription_status }}</span>
            </span>
            <p class="text-[11px] max-w-xs text-right">
              Email must be verified to use AI features. Stripe handles upgrades and billing outside CareerAI.
            </p>
          </div>
        </div>

        <div class="mt-3 flex flex-wrap items-center gap-3 text-sm">
          <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full bg-black/60 border border-slate-400/70">
            <span>ğŸª™</span>
            <span class="font-semibold">{{ coins_free }}</span>
            <span class="text-[11px] text-white/65">Silver (Free)</span>
          </span>
          <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full bg-black/60 border border-amber-400/70">
            <span>â­</span>
            <span class="font-semibold">{{ coins_pro }}</span>
            <span class="text-[11px] text-white/65">Gold (Pro)</span>
          </span>
        </div>

        <p class="text-[11px] text-white/60 mt-3">
          Silver ğŸª™ are given at account creation and refill daily (as configured by your university).
          Gold â­ are Pro credits from your subscription and power Pro-only tools.
        </p>
      </div>

      <!-- Feature costs -->
      <div class="glass-panel rounded-2xl p-6 border border-white/10">
        <div class="flex items-center justify-between mb-3 gap-2">
          <h2 class="text-lg font-semibold flex items-center gap-2">
            <i data-lucide="list-checks" class="w-4 h-4"></i>
            <span>Feature Costs</span>
          </h2>
          <p class="text-[11px] text-white/60 max-w-xs text-right">
            These values are configured by your university / tenant admin and may differ across campuses.
          </p>
        </div>

        <div class="text-sm text-white/80 overflow-x-auto">
          <table class="w-full text-left min-w-[540px] border-separate border-spacing-y-1">
            <thead class="text-white/60 text-xs border-b border-white/10">
              <tr>
                <th class="py-1 pr-2">Feature</th>
                <th class="py-1 pr-2">Daily free (ğŸª™)</th>
                <th class="py-1 pr-2">Pro cost (â­)</th>
                <th class="py-1">Notes</th>
              </tr>
            </thead>
            <tbody>
              {% for feature, limits in features.items() %}
              <tr class="bg-white/5 rounded-xl">
                <td class="py-2 pr-2 align-top">
                  <div class="flex items-center gap-2">
                    <span class="font-semibold text-xs">{{ feature }}</span>
                    {% if feature == 'resume' %}
                      <span class="text-[10px] px-1.5 py-0.5 rounded-full bg-white/10 border border-white/20">Pro</span>
                    {% endif %}
                  </div>
                </td>
                <td class="py-2 pr-2 align-top text-xs">
                  {{ limits.daily_free }}
                </td>
                <td class="py-2 pr-2 align-top text-xs">
                  {{ limits.pro_cost }}
                </td>
                <td class="py-2 pr-2 align-top text-xs text-white/60">
                  {% if feature == 'portfolio' %}
                    Free suggests 1 project; Pro suggests 3 + publishing.
                  {% elif feature == 'jobpack' %}
                    Free = basic report; Pro = deep structured breakdown + PDF.
                  {% elif feature == 'skillmapper' %}
                    Free = 3 roles; Pro = deeper trends & gaps.
                  {% elif feature == 'internships' %}
                    Free = 1 run/day; Pro = unlimited runs.
                  {% else %}
                    &nbsp;
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <p class="mt-3 text-[11px] text-white/60">
          If a tool fails internally, CareerAI retries. When we still canâ€™t complete it,
          your credits are automatically refunded and you can try again.
        </p>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.lucide) {
      window.lucide.createIcons();
    }
  });
</script>
{% endblock %}
