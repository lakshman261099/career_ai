{% extends "base.html" %}
{% block title %}Settings — CareerAI{% endblock %}
{% block content %}
<section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 pt-10 pb-16 text-white">
  <div class="grid lg:grid-cols-[260px,1fr] gap-6">
    {% include "settings/_sidebar.html" %}

    <div class="space-y-6">
      <!-- Account basics -->
      <div class="glass-panel rounded-2xl p-6 shadow-xl border border-white/10">
        <div class="flex items-center justify-between gap-2 mb-4">
          <div>
            <h1 class="text-xl sm:text-2xl font-bold">Account</h1>
            <p class="text-sm text-white/70 mt-1">
              Update your display name and quickly jump into your Profile Portal.
            </p>
          </div>
          <span class="hidden sm:inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-white/5 border border-white/20 text-[11px] text-white/65">
            <i data-lucide="user" class="w-3.5 h-3.5"></i>
            <span>{{ current_user.email }}</span>
          </span>
        </div>

        <form method="POST" action="{{ url_for('settings.index') }}" class="space-y-4">
          <div>
            <label class="block text-sm mb-1">Display Name</label>
            <input name="name"
                   value="{{ current_user.name }}"
                   class="w-full rounded-xl px-3 py-2 bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70 text-sm">
            <p class="text-[11px] text-white/55 mt-1">
              This name appears in your dashboard, Profile Portal preview, and some emails.
            </p>
          </div>

          <div class="flex flex-wrap items-center gap-2">
            <button class="btn-primary inline-flex items-center gap-1" type="submit">
              <i data-lucide="save" class="w-4 h-4"></i>
              <span>Save</span>
            </button>
            <a class="btn-ghost inline-flex items-center gap-1" href="{{ url_for('settings.profile') }}">
              <i data-lucide="id-card" class="w-3.5 h-3.5"></i>
              <span>Open Profile Portal</span>
            </a>
          </div>
        </form>
      </div>

      <!-- Profile Portal explainer -->
      <div class="glass-panel rounded-2xl p-6 border border-white/10">
        <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
          <div>
            <h2 class="text-lg font-semibold flex items-center gap-2">
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-emerald-500/20 border border-emerald-300/70">
                <i data-lucide="id-card" class="w-4 h-4"></i>
              </span>
              Profile Portal
            </h2>
            <p class="text-white/70 text-sm mt-2 max-w-xl">
              Fill this once and let CareerAI reuse it everywhere. Job Packs, Skill Mapper, Portfolio, and Internship
              Analyzer all read from your Profile Portal as the main source of truth.
            </p>
            <p class="text-white/50 text-xs mt-1 max-w-xl">
              Upload a resume for AI scan (optional) or edit fields manually. A stronger profile gives you richer,
              more accurate AI results and better role suggestions.
            </p>
          </div>
          <div class="flex flex-col items-end gap-2 text-xs text-white/65">
            <p class="font-semibold text-white/80">Recommended flow:</p>
            <ul class="space-y-0.5 text-right">
              <li>1️⃣ Complete Profile Portal (~70–80%)</li>
              <li>2️⃣ Run Skill Mapper for target roles</li>
              <li>3️⃣ Use Portfolio Builder for projects</li>
              <li>4️⃣ Run Job Packs for each JD</li>
            </ul>
            <a class="btn-primary mt-1 inline-flex items-center gap-1 text-sm" href="{{ url_for('settings.profile') }}">
              <i data-lucide="arrow-right-circle" class="w-4 h-4"></i>
              <span>Go to Profile Portal</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.lucide) {
      window.lucide.createIcons();
    }
  });
</script>
{% endblock %}
