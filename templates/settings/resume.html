{% extends "base.html" %}
{% block title %}Resume Profile — CareerAI{% endblock %}
{% block content %}
<section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 pt-10 pb-16 text-white">
  <div class="grid lg:grid-cols-[260px,1fr] gap-6">
    {% include "settings/_sidebar.html" %}

    <div class="glass-panel rounded-2xl p-6 shadow-xl border border-white/10">
      <div class="flex items-start justify-between gap-3 mb-3">
        <div>
          <h1 class="text-xl sm:text-2xl font-bold flex items-center gap-2">
            <span>Resume Profile</span>
            {% if not is_pro() %}
              <span class="text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/20 uppercase tracking-wide">
                Pro
              </span>
            {% else %}
              <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-300/60 text-emerald-100">
                Pro Enabled
              </span>
            {% endif %}
          </h1>
          <p class="text-white/70 text-sm mt-1">
            Upload a PDF/TXT or paste your resume text. We’ll store a cleaned version as your
            <span class="font-semibold">Resume Profile</span> for Job Packs, Skill Mapper Pro and other deep evaluations.
          </p>
          <p class="text-[11px] text-white/60 mt-1">
            This uses <span class="font-semibold">Gold ⭐ credits</span> from your Pro plan.
            Free users can still rely on the Profile Portal without a separate Resume Profile.
          </p>
        </div>
        <div class="hidden sm:flex flex-col items-end text-xs text-white/60 max-w-xs">
          <p class="font-semibold text-white/80 mb-1">Used by:</p>
          <ul class="space-y-0.5 text-right">
            <li>• Deep Job Packs (resume ATS + rewrites)</li>
            <li>• Skill Mapper Pro (richer clusters)</li>
            <li>• Future Pro-only resume tools</li>
          </ul>
        </div>
      </div>

      <form method="POST" enctype="multipart/form-data" class="mt-4 space-y-5">
        <div>
          <label class="block text-sm mb-1">Upload (PDF/TXT)</label>
          <input type="file"
                 name="file"
                 accept=".pdf,.txt"
                 class="w-full rounded-xl px-3 py-2 bg-white/10 border border-white/20 text-sm">
          <p class="text-[11px] text-white/60 mt-1">
            We recommend a single, up-to-date resume. Job Packs still use your Profile Portal even if you don’t upload here.
          </p>
        </div>

        <div class="my-2 text-center text-white/50 text-xs flex items-center justify-center gap-2">
          <span class="h-px w-8 bg-white/15"></span>
          <span>or</span>
          <span class="h-px w-8 bg-white/15"></span>
        </div>

        <div>
          <label class="block text-sm mb-1">Paste Text</label>
          <textarea name="text"
                    rows="8"
                    class="w-full rounded-xl px-3 py-2 bg-white/10 border border-white/20 text-sm"
                    placeholder="Paste your resume text here..."></textarea>
          <p class="text-[11px] text-white/60 mt-1">
            We’ll normalize formatting and store a structured version for AI analysis. Avoid including sensitive data — stick to education, skills, projects, and experience.
          </p>
        </div>

        <div class="flex flex-wrap gap-2 items-center">
          <button class="btn-primary inline-flex items-center gap-1" type="submit">
            <i data-lucide="sparkles" class="w-4 h-4"></i>
            <span>Save to Profile ⭐</span>
          </button>
          <a class="btn-ghost inline-flex items-center gap-1" href="{{ url_for('settings.index') }}">
            <i data-lucide="arrow-left" class="w-3.5 h-3.5"></i>
            <span>Back</span>
          </a>
          <p class="text-[11px] text-white/55 ml-1">
            Your Resume Profile does <span class="underline underline-offset-2">not</span> replace the Profile Portal;
            it acts as an extra signal on top for Pro tools.
          </p>
        </div>
      </form>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.lucide) {
      window.lucide.createIcons();
    }
  });
</script>
{% endblock %}
