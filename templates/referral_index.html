{% extends "base.html" %}
{% import "components.html" as ui %}
{% block title %}Referral Builder{% endblock %}
{% block content %}
<h2 class="text-3xl font-bold mb-4 flex items-center gap-3">{{ ui.icon('ref') }} Referral Builder</h2>
<div class="glass card-pad">
  <form action="/referral/upload" method="post" enctype="multipart/form-data" class="grid gap-3">
    <div class="text-sm opacity-80">Upload CSV with headers: <code>name,role,company,email</code></div>
    <div><input type="file" name="file" accept=".csv" class="w-full text-sm"></div>
    <div class="flex gap-3 items-center">
      <select class="p-2 text-black rounded-xl" name="mode">
        <option value="fast">Fast</option>
        <option value="deep">Deep (Pro)</option>
      </select>
      <button class="btn btn-primary px-4 py-2">Generate Messages</button>
    </div>
  </form>
</div>
{% if rows %}{{ ui.lock_wrap(is_pro or request.args.get('mode','fast')=='fast', include('referral_results.html')) }}{% endif %}
{% endblock %}
