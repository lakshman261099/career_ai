{% extends "base.html" %}
{% block title %}AI Career Agent â€“ CareerAI{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">AI Career Agent</h1>

{% if gated %}
  <div class="border rounded p-4 bg-yellow-50 dark:bg-yellow-900/20">
    <p class="mb-2">The Agent is a <strong>Pro feature</strong> on this demo.</p>
    <a href="/pricing" class="px-3 py-2 bg-purple-600 text-white rounded">Upgrade to Pro</a>
  </div>
{% else %}
  <div class="glass rounded-xl p-4">
    <p class="text-sm text-slate-600 dark:text-slate-300">Your daily topâ€‘3 job packs will appear here after you run the agent.</p>
    <div class="mt-3">
      <button class="px-4 py-2 bg-purple-600 text-white rounded" onclick="runNow()">Run Now</button>
    </div>
    <div id="agentResults" class="mt-6 grid gap-3"></div>
  </div>

  <script>
    async function runNow(){
      // Stub call â€” wire to your /agent/run endpoint if youâ€™ve got it
      const box = document.getElementById('agentResults');
      box.innerHTML = '<div class="skeleton h-20 rounded"></div>';
      setTimeout(()=>{
        box.innerHTML = `
          <div class="border p-3 rounded">ðŸ”Ž Example result #1</div>
          <div class="border p-3 rounded">ðŸ”Ž Example result #2</div>
          <div class="border p-3 rounded">ðŸ”Ž Example result #3</div>`;
        window.__confettiNow && window.__confettiNow();
      }, 1200);
    }
  </script>
{% endif %}
{% endblock %}
